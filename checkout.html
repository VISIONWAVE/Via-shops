<!DOCTYPE html><html><head><meta charset="utf-8"><title>Checkout</title><link rel="stylesheet" href="assets/css/style.css"></head><body class="dark-mode"><h2 style="text-align:center">Checkout</h2><form id="chkForm" style="max-width:600px;margin:auto"><label>Name<input name="name" required></label><label>Address<textarea name="addr" required></textarea></label><button class="btn-primary">Place Order</button></form><script>document.getElementById('chkForm').onsubmit=async e=>{e.preventDefault();const cart=JSON.parse(localStorage.getItem('cart')||'{}');if(!Object.keys(cart).length)return alert('Cart empty');const map=await(await fetch('backend/product/get-products.php')).json();const payload=Object.entries(cart).map(([id,qty])=>({id,qty,price:map.find(p=>p.id==id).price}));const res=await fetch('backend/cart/checkout.php',{method:'POST',body:JSON.stringify(payload)});const j=await res.json();if(j.ok){localStorage.removeItem('cart');alert('Order #'+j.order+' placed!');location='order-confirmation.html';}}</script></body></html>
